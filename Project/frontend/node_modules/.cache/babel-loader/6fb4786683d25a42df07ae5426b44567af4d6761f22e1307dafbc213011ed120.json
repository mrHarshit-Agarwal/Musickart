{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import axios from'axios';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import styles from'./ProductCard.module.css';import{UserContext}from'../../App';import{useNavigate}from'react-router-dom';import GetProductsByQuery from'../../api/GetProductsByQuery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductCard(props){var _useContext=useContext(UserContext),gridView=_useContext.gridView;var _useState=useState(),_useState2=_slicedToArray(_useState,2),detailView=_useState2[0],setDetailView=_useState2[1];var _useContext2=useContext(UserContext),userLoggedIn=_useContext2.userLoggedIn,setCurrProduct=_useContext2.setCurrProduct;var navigate=useNavigate();var item=props.product;var currUser=JSON.parse(localStorage.getItem('musicartUser'));var handleAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;token=currUser.token;_context.next=4;return axios.patch(\"https://musicart-backend.onrender.com/user/cart/add/\".concat(currUser._id),{body:{productId:item._id}},{headers:{Authorization:\"Bearer \".concat(token)}});case 4:res=_context.sent;toast.success('Item added to cart!',{autoClose:2000});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error('Could not add to cart, try after signing in again!',{autoClose:2000});case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function handleAddToCart(){return _ref.apply(this,arguments);};}();var handleNavigate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var searchedProduct,product;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return GetProductsByQuery('name',props.product.name);case 2:searchedProduct=_context2.sent;if(searchedProduct==-1){//failed to get products\ntoast.error('Could not get product, server busy');}else{product=searchedProduct[0];navigate('/productDetails',{state:{props:{product:product}}});}case 4:case\"end\":return _context2.stop();}},_callee2);}));return function handleNavigate(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(gridView==true)setDetailView(false);else setDetailView(true);},[gridView]);//---------------------------------------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.main,\" \").concat(detailView&&styles.detail,\" \"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.box1,\" \"),children:[/*#__PURE__*/_jsx(\"img\",{src:item.img_url[0],alt:\"image-1\",className:styles.pic}),userLoggedIn&&/*#__PURE__*/_jsx(\"img\",{src:\"../../images/addToCart.png\",alt:\"cart\",className:styles.pic1,onClick:handleAddToCart})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.box2,\" \").concat(detailView&&styles.detailBox2,\" \"),onClick:handleNavigate,children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Price - \\u20B9 \",item.price]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{children:item.color}),\" | \",/*#__PURE__*/_jsxs(\"span\",{children:[item.type,\" headphone\"]})]}),detailView&&/*#__PURE__*/_jsx(\"span\",{children:item.description})]})]});}","map":{"version":3,"names":["React","useContext","useState","useEffect","axios","toast","styles","UserContext","useNavigate","GetProductsByQuery","jsx","_jsx","jsxs","_jsxs","ProductCard","props","_useContext","gridView","_useState","_useState2","_slicedToArray","detailView","setDetailView","_useContext2","userLoggedIn","setCurrProduct","navigate","item","product","currUser","JSON","parse","localStorage","getItem","handleAddToCart","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","res","wrap","_callee$","_context","prev","next","patch","concat","_id","body","productId","headers","Authorization","sent","success","autoClose","t0","error","stop","apply","arguments","handleNavigate","_ref2","_callee2","searchedProduct","_callee2$","_context2","name","state","className","main","detail","children","box1","src","img_url","alt","pic","pic1","onClick","box2","detailBox2","price","color","type","description"],"sources":["C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/src/components/productCard/ProductCard.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport styles from './ProductCard.module.css'\r\nimport { UserContext } from '../../App';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GetProductsByQuery from '../../api/GetProductsByQuery';\r\n\r\n\r\nexport default function ProductCard(props) {\r\n\r\n    const { gridView } = useContext(UserContext);\r\n    const [detailView, setDetailView] = useState();\r\n    const { userLoggedIn, setCurrProduct } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const item = props.product;\r\n    const currUser = JSON.parse(localStorage.getItem('musicartUser'));\r\n\r\n    const handleAddToCart = async () => {\r\n        try {\r\n            const token = currUser.token;\r\n            const res = await axios.patch(`https://musicart-backend.onrender.com/user/cart/add/${currUser._id}`,\r\n                {\r\n                    body: { productId: item._id }\r\n                },\r\n                {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                }\r\n            )\r\n            toast.success('Item added to cart!', { autoClose: 2000 })\r\n        }\r\n        catch (err) {\r\n            toast.error('Could not add to cart, try after signing in again!', { autoClose: 2000 })\r\n        }\r\n\r\n    }\r\n    const handleNavigate = async () => {\r\n        const searchedProduct = await GetProductsByQuery('name', props.product.name);\r\n        if (searchedProduct == -1) {\r\n            //failed to get products\r\n            toast.error('Could not get product, server busy');\r\n        }\r\n        else {\r\n            const product = searchedProduct[0];\r\n            navigate('/productDetails', {\r\n                state: {\r\n                    props: { product }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (gridView == true)\r\n            setDetailView(false);\r\n        else\r\n            setDetailView(true)\r\n    }, [gridView])\r\n    //---------------------------------------------------\r\n\r\n    return (\r\n        <div className={`${styles.main} ${detailView && styles.detail} `} >\r\n            <div className={`${styles.box1} `}>\r\n                <img src={item.img_url[0]} alt=\"image-1\" className={styles.pic} />\r\n                {userLoggedIn && <img src=\"../../images/addToCart.png\" alt=\"cart\" className={styles.pic1} onClick={handleAddToCart} />}\r\n            </div>\r\n            <div className={`${styles.box2} ${detailView && styles.detailBox2} `} onClick={handleNavigate}>\r\n                <span>{item.name}</span>\r\n                <span>Price - â‚¹ {item.price}</span>\r\n                <span><span>{item.color}</span> | <span>{item.type} headphone</span></span>\r\n                {detailView && <span>{item.description}</span>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}