{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import axios from'axios';import styles from'./Products.module.css';import ProductCard from'../productCard/ProductCard';import{UserContext}from'../../App';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Products(){var _useContext=useContext(UserContext),filters=_useContext.filters;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),displayProducts=_useState2[0],setDisplayProducts=_useState2[1];var fqueryString='';var loadQueryProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,productCards,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://musicart-backend.onrender.com/products/view\".concat(fqueryString));case 3:res=_context.sent;productCards=[];for(i=0;i<res.data.length;i++){productCards.push(/*#__PURE__*/_jsx(ProductCard,{product:res.data[i]}));}setDisplayProducts(productCards);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function loadQueryProducts(){return _ref.apply(this,arguments);};}();var loadProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var currFilter,queryString;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:try{currFilter=filters;queryString='?';currFilter.forEach(function(item){var itemKey=Object.keys(item)[0];var itemValue=item[itemKey];if(itemKey=='Headphone type'&&itemValue!='none'){queryString+=\"type=\".concat(itemValue,\"&\");}if(itemKey=='Company'&&itemValue!='none'){queryString+=\"company=\".concat(itemValue,\"&\");}if(itemKey=='Colour'&&itemValue!='none'){queryString+=\"color=\".concat(itemValue,\"&\");}if(itemKey=='Price'&&itemValue!='none'){if(itemValue=='₹1,000 - ₹9,999')itemValue='1000-9999';if(itemValue=='₹0 - ₹999')itemValue='0-999';if(itemValue=='₹10,000 - ₹99,999')itemValue='10000-99999';queryString+=\"price=\".concat(itemValue,\"&\");}if(itemKey=='Sort by'&&itemValue!='none'){if(itemValue=='Price: Lowest'){queryString+=\"sort=price1\";}if(itemValue=='Price: Highest'){queryString+=\"sort=price-1\";}if(itemValue=='Name: A-Z'){queryString+=\"sort=A-Z\";}if(itemValue=='Name: Z-A'){queryString+=\"sort=Z-A\";}queryString+='&';}fqueryString=queryString.substring(0,queryString.length-1);});}catch(err){}case 1:case\"end\":return _context2.stop();}},_callee2);}));return function loadProducts(){return _ref2.apply(this,arguments);};}();//------------------------------------------------\nuseEffect(function(){loadProducts();loadQueryProducts();},[filters]);return/*#__PURE__*/_jsx(\"div\",{className:styles.main,children:displayProducts});}","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","styles","ProductCard","UserContext","jsx","_jsx","Products","_useContext","filters","_useState","_useState2","_slicedToArray","displayProducts","setDisplayProducts","fqueryString","loadQueryProducts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","productCards","i","wrap","_callee$","_context","prev","next","get","concat","sent","data","length","push","product","t0","stop","apply","arguments","loadProducts","_ref2","_callee2","currFilter","queryString","_callee2$","_context2","forEach","item","itemKey","Object","keys","itemValue","substring","err","className","main","children"],"sources":["C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/src/components/products/Products.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport styles from './Products.module.css'\r\nimport ProductCard from '../productCard/ProductCard'\r\nimport { UserContext } from '../../App'\r\nexport default function Products() {\r\n\r\n  const { filters } = useContext(UserContext);\r\n  const [displayProducts, setDisplayProducts] = useState([]);\r\n  let fqueryString = '';\r\n\r\n  const loadQueryProducts = async () => {\r\n    try {\r\n      const res = await axios.get(`https://musicart-backend.onrender.com/products/view${fqueryString}`);\r\n      let productCards = [];\r\n      for (let i = 0; i < res.data.length; i++) {\r\n        productCards.push(<ProductCard\r\n          product={res.data[i]}\r\n        />)\r\n      }\r\n      setDisplayProducts(productCards);\r\n    }\r\n    catch (err) {\r\n\r\n    }\r\n  }\r\n  const loadProducts = async () => {\r\n    try {\r\n\r\n      const currFilter = filters;\r\n      let queryString = '?';\r\n      currFilter.forEach((item) => {\r\n        let itemKey = Object.keys(item)[0];\r\n        let itemValue = item[itemKey];\r\n\r\n        if (itemKey == 'Headphone type' && itemValue != 'none') {\r\n          queryString += `type=${itemValue}&`;\r\n        }\r\n        if (itemKey == 'Company' && itemValue != 'none') {\r\n          queryString += `company=${itemValue}&`;\r\n        }\r\n        if (itemKey == 'Colour' && itemValue != 'none') {\r\n          queryString += `color=${itemValue}&`;\r\n        }\r\n        if (itemKey == 'Price' && itemValue != 'none') {\r\n          if (itemValue == '₹1,000 - ₹9,999')\r\n            itemValue = '1000-9999'\r\n          if (itemValue == '₹0 - ₹999')\r\n            itemValue = '0-999'\r\n          if (itemValue == '₹10,000 - ₹99,999')\r\n            itemValue = '10000-99999'\r\n\r\n          queryString += `price=${itemValue}&`;\r\n        }\r\n        if (itemKey == 'Sort by' && itemValue != 'none') {\r\n          if (itemValue == 'Price: Lowest') {\r\n            queryString += `sort=price1`;\r\n          }\r\n          if (itemValue == 'Price: Highest') {\r\n            queryString += `sort=price-1`;\r\n          }\r\n          if (itemValue == 'Name: A-Z') {\r\n            queryString += `sort=A-Z`\r\n          }\r\n          if (itemValue == 'Name: Z-A') {\r\n            queryString += `sort=Z-A`\r\n          }\r\n          queryString += '&';\r\n        }\r\n\r\n        fqueryString = queryString.substring(0, queryString.length - 1);\r\n\r\n      })\r\n    }\r\n\r\n    catch (err) {\r\n    }\r\n  }\r\n  //------------------------------------------------\r\n  useEffect(() => {\r\n    loadProducts();\r\n    loadQueryProducts();\r\n  }, [filters])\r\n\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      {displayProducts}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}