{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import styles from'./Searchbar.module.css';import GetAllProducts from'../../api/GetAllProducts';import GetProductsByQuery from'../../api/GetProductsByQuery';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Searchbar(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),showSuggestions=_useState2[0],setShowSuggestions=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productNames=_useState4[0],setProductNames=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),suggestedNames=_useState6[0],setSuggestedNames=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchboxValue=_useState8[0],setSearchboxValue=_useState8[1];var navigate=useNavigate();var getProductNames=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var allProducts,allNames;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return GetAllProducts();case 3:allProducts=_context.sent;allNames=[];allProducts.forEach(function(index){allNames.push(index.name);});setProductNames(allNames);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getProductNames(){return _ref.apply(this,arguments);};}();var handleProductSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name){var searchedProduct,product;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setSearchboxValue(name);setShowSuggestions(false);_context2.next=4;return GetProductsByQuery('name',name);case 4:searchedProduct=_context2.sent;if(searchedProduct==-1){//failed to get products\ntoast.error('Could not get product, server busy');}else{product=searchedProduct[0];navigate('/productDetails',{state:{props:{product:product}}});}case 6:case\"end\":return _context2.stop();}},_callee2);}));return function handleProductSearch(_x){return _ref2.apply(this,arguments);};}();var handleSearch=function handleSearch(e){var suggestedName=[];var searchName=e.target.value.trim();setSearchboxValue(searchName);productNames.forEach(function(name){if(name.toLowerCase().includes(searchName.toLowerCase())){suggestedName.push(/*#__PURE__*/_jsx(\"span\",{className:styles.text1,onClick:function onClick(){return handleProductSearch(name);},children:name}));}});setSuggestedNames(suggestedName);searchName.length>0?setShowSuggestions(true):setShowSuggestions(false);};useEffect(function(){setShowSuggestions(false);getProductNames();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.main,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.top,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.box1,children:/*#__PURE__*/_jsx(\"img\",{src:\"../../images/searchIcon.png\",alt:\"search\",className:styles.icon})}),/*#__PURE__*/_jsx(\"div\",{className:styles.box2,children:/*#__PURE__*/_jsx(\"textarea\",{className:styles.input1,placeholder:\"Search by Product Name\",spellCheck:\"false\",onChange:handleSearch,value:searchboxValue})})]}),showSuggestions&&/*#__PURE__*/_jsx(\"div\",{className:styles.bottom,children:suggestedNames})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","styles","GetAllProducts","GetProductsByQuery","toast","jsx","_jsx","jsxs","_jsxs","Searchbar","_useState","_useState2","_slicedToArray","showSuggestions","setShowSuggestions","_useState3","_useState4","productNames","setProductNames","_useState5","_useState6","suggestedNames","setSuggestedNames","_useState7","_useState8","searchboxValue","setSearchboxValue","navigate","getProductNames","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","allProducts","allNames","wrap","_callee$","_context","prev","next","sent","forEach","index","push","name","t0","stop","apply","arguments","handleProductSearch","_ref2","_callee2","searchedProduct","product","_callee2$","_context2","error","state","props","_x","handleSearch","e","suggestedName","searchName","target","value","trim","toLowerCase","includes","className","text1","onClick","children","length","main","top","box1","src","alt","icon","box2","input1","placeholder","spellCheck","onChange","bottom"],"sources":["C:/Users/HARSHIT AGARWAL/OneDrive/Desktop/cuvette/Musicart-app/Project/frontend/src/components/searchbox/Searchbar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './Searchbar.module.css'\r\n\r\nimport GetAllProducts from '../../api/GetAllProducts';\r\nimport GetProductsByQuery from '../../api/GetProductsByQuery';\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\nexport default function Searchbar() {\r\n\r\n  const [showSuggestions, setShowSuggestions] = useState();\r\n  const [productNames, setProductNames] = useState([]);\r\n  const [suggestedNames, setSuggestedNames] = useState();\r\n  const [searchboxValue, setSearchboxValue] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n  const getProductNames = async()=>{\r\n    try{\r\n      const allProducts = await GetAllProducts();\r\n      const allNames = [];\r\n      allProducts.forEach((index)=>{\r\n        allNames.push(index.name)\r\n      })\r\n      setProductNames(allNames);\r\n    }\r\n    catch(err){\r\n      // console.log('error in getting names', err)\r\n    }\r\n  }\r\n\r\n  const handleProductSearch = async(name)=>{\r\n    setSearchboxValue(name)\r\n    setShowSuggestions(false)\r\n    const searchedProduct = await GetProductsByQuery('name', name);\r\n    if(searchedProduct == -1){\r\n      //failed to get products\r\n      toast.error('Could not get product, server busy');\r\n    }\r\n    else{\r\n      const product = searchedProduct[0];\r\n      navigate('/productDetails',{\r\n        state : {\r\n          props: {product}\r\n        }\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  const handleSearch = (e)=>{\r\n    const suggestedName = [];\r\n    const searchName = e.target.value.trim();\r\n    setSearchboxValue(searchName)\r\n\r\n    productNames.forEach((name)=>{\r\n\r\n      if(name.toLowerCase().includes(searchName.toLowerCase())){\r\n        suggestedName.push(\r\n          <span className={styles.text1}\r\n            onClick={()=>handleProductSearch(name)}\r\n          >{name}</span>\r\n        );\r\n      }\r\n    })\r\n    setSuggestedNames(suggestedName);\r\n    searchName.length > 0 ? setShowSuggestions(true): setShowSuggestions(false);\r\n\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    setShowSuggestions(false);\r\n    getProductNames();\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={styles.top}>\r\n        <div className={styles.box1}>\r\n          <img src=\"../../images/searchIcon.png\" alt=\"search\" className={styles.icon} />\r\n        </div>\r\n        <div className={styles.box2}>\r\n          <textarea className={styles.input1}\r\n            placeholder='Search by Product Name'\r\n            spellCheck='false'\r\n            onChange={handleSearch}\r\n            value={searchboxValue}\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      {showSuggestions && <div className={styles.bottom}>\r\n        {suggestedNames}\r\n\r\n      </div>}\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}